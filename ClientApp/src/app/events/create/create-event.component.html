<div class="container">
  <form #eventForm="ngForm" (ngSubmit)="onSubmit(eventForm)">
    <div class="container-fluid">

      <!--Image-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="eventPhoto">Event Photo Placeholder</label>
            <img [src]="imagePreview" class="p-1" />
            <input #file type="file" class="form-control-file" (change)="handleDrop($event.target.files)" />
          </div>
        </div>
      </div>

      <!--Event Name-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="eventName">Event Name</label>
            <input type="text" name="eventName" class="form-control" placeholder="Add a short, clear name" [(ngModel)]="model.name" #name="ngModel" required />
          </div>
        </div>
      </div>

      <!--Google Location-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="location">Location</label>
            <input type="text" name="location" class="form-control" placeholder="Include a place or address" [(ngModel)]="model.address" google-place (onSelect)="setAddress($event)" #location="ngModel" required />
          </div>
        </div>
      </div>

      <!--Start date and time-->
      <div class="row">
        <div class="col">
          <div class="form-group">

            <label for="startDate">Start Date/Time</label>
            <div class="input-group">
              <input id="startDate" class="form-control" placeholder="yyyy-mm-dd" name="startDate"
                     ngbDatepicker #startDate="ngbDatepicker" [ngModel]="model.startDate"
                     (click)="startDate.toggle()" (ngModelChange)="model.startDate = $event; model.endDate = $event;"
                     #startDateValidation="ngModel" required>
              <div class="input-group-append">
                <fa-icon class="btn btn-outline-secondary calendar" [icon]="faCalendar" (click)="startDate.toggle()"></fa-icon>
              </div>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="form-group-sm">
            <label for="startTime">Start Time</label>
            <ngb-timepicker id="startTime" name="startTime" [(ngModel)]="model.startTime" [meridian]="true" [spinners]="false" [size]="small" #startTime="ngModel" required> </ngb-timepicker>
          </div>
        </div>
      </div>

      <!--End date and time-->
      <div class="row">
        <div class="col">
          <div class="form-group">

            <label for="endDate">End Date/Time</label>
            <div class="input-group">
              <input id="endDate" class="form-control" placeholder="yyyy-mm-dd" name="endDate" ngbDatepicker #endDate="ngbDatepicker" [(ngModel)]="model.endDate" (click)="endDate.toggle()" #endDateValidation="ngModel" required>
              <div class="input-group-append">
                <fa-icon class="btn btn-outline-secondary calendar" [icon]="faCalendar" (click)="endDate.toggle()"></fa-icon>
              </div>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="form-group-sm">
            <label for="endTime">End Time</label>
            <ngb-timepicker id="endTime" name="endTime" [(ngModel)]="model.endTime" [meridian]="true" [spinners]="false" [size]="small" #endTime="ngModel" required> </ngb-timepicker>
          </div>
        </div>
      </div>

      <!--Time per slot-->
      <!--<div class="row" *ngIf="endDateValidation.valid && startDateValidation.valid && startTime.valid && endTime.valid">-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="slotTimes">Minutes per Appointment Slot</label>
            <div class="input-group">
              <input name="slotTimes" type="number" [(ngModel)]="timePerSlot" #slotTimes="ngModel" required (ngModelChange)="previewAppointmentSlots();" />
            </div>
          </div>
        </div>
        <div class="col">
          <div class="appointments border mb-2 pt-2 shadow-sm text-center">
            <div *ngFor="let time of appointmentTimes">
              <p>Appointment slot at time {{time | dfnsFormat : 'MMMM D, h:mm aa'}}</p>
            </div>
          </div>

        </div>

      </div>

      <!--Description-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <label for="description">Description</label>
            <input type="text" name="description" class="form-control" placeholder="Tell people more about the event" [(ngModel)]="model.description" />
          </div>
        </div>
      </div>

      <!--Submit button-->
      <div class="row">
        <div class="col">
          <div class="form-group">
            <button type="submit" class="btn btn-default float-right">Save</button>
          </div>
        </div>
      </div>

    </div>
  </form>

</div>

